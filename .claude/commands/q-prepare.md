---
description: qa.md生成と音声ファイルリスト作成
---

# 音声準備

qas.mdファイルから qa.md を生成し、音声ファイルリストを出力します。

## 引数

- `$ARGUMENTS`: quizフォルダパス（例: `datas/history/grade2/4-1/3nanban_trade/quiz`）

---

## ステップ1: フォルダ確認

### 1.1 フォルダの存在確認

```bash
ls -la [フォルダパス]
```

### 1.2 qas.mdファイルの検索

```bash
ls [フォルダパス]/*qas*.md
```

**複数ファイルがある場合**: 各ファイルに対して処理を行う。

### 1.3 ファイル一覧の表示

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
検出されたqas.mdファイル:

1. [ファイル名1].md（[問題数1]問）
2. [ファイル名2].md（[問題数2]問）
...

合計: [N]ファイル、[M]問
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ステップ2: 統合qa.mdの作成

### 2.1 全qas.mdファイルの内容を統合

全ての *qas*.md ファイルから問題と答えのみを抽出し、1つのqa.mdに統合。

**qas.mdの構造**:
```
問題1
答え1
補足1

問題2
答え2
補足2
```

↓ 補足行と空行を削除して統合

**qa.mdの構造**（統合版）:
```
問題1
答え1
問題2
答え2
...
問題N
答えN
```

### 2.2 保存

`[フォルダパス]/qa.md` に保存（単一ファイル）。

---

## ステップ3: 音声ファイルリストの出力

### 3.1 audiosフォルダの作成

```bash
mkdir -p [フォルダパス]/audios
```

### 3.2 トピックIDの決定

親フォルダ名をそのまま使用（例: `3nanban_trade`）

### 3.3 音声ファイルリストの出力

qa.mdの各行に対応する音声ファイルを連番で作成。

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
## 音声ファイル作成依頼

保存先: [フォルダパス]/audios/

qa.mdの各行 → 対応する音声ファイル

| 行番号 | ファイル名 | 種類 | 読み上げテキスト |
|-------|-----------|------|-----------------|
| 1 | 00-[トピックID].wav | Q1 | [問題1] |
| 2 | 01-[トピックID].wav | A1 | [答え1] |
| 3 | 02-[トピックID].wav | Q2 | [問題2] |
| 4 | 03-[トピックID].wav | A2 | [答え2] |
...（全qas.mdの内容を通しで番号付け）

※ 補足部分の音声は不要（qa.mdには含まれない）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ステップ4: 完了報告

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
## 準備完了

生成したファイル:
- qa.md（音声作成用・統合版）
- audios/（空フォルダ）

### 次のステップ
1. 上記リストに従って音声ファイルを作成
2. audios/ フォルダに配置
3. `/q-render [フォルダパス]` でレンダリング
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ファイル構造

```
[フォルダパス]/
├── qas.md              # 元データ（問題・答え・補足）
├── qa.md               # 音声作成用（問題・答えのみ）
└── audios/             # 音声ファイル保存先
    ├── 00-[トピック].wav  # Q1
    ├── 01-[トピック].wav  # A1
    └── ...
```

### 複数qas.mdファイルがある場合

```
[フォルダパス]/
├── 03-qas.md           # 元データ1
├── 04-qas.md           # 元データ2
├── qa.md               # 統合版（全問題を連番）
└── audios/             # 単一フォルダ・連番
    ├── 00-[トピック].wav  # Q1（03-qas.md）
    ├── 01-[トピック].wav  # A1
    ├── ...
    ├── 11-[トピック].wav  # A6（03-qas.md最後）
    ├── 12-[トピック].wav  # Q7（04-qas.md開始）
    └── ...
```
