---
description: qa.md生成と音声ファイルリスト作成
---

# 音声準備

qas.mdファイルから qa.md を生成し、音声ファイルリストを出力します。

## 引数

- `$ARGUMENTS`: quizフォルダパス（例: `datas/history/grade2/4-1/3nanban_trade/quiz`）

---

## ステップ1: フォルダ確認

### 1.1 フォルダの存在確認

```bash
ls -la [フォルダパス]
```

### 1.2 qas.mdファイルの検索

```bash
ls [フォルダパス]/*qas*.md
```

**注意**: `*_review*.md` や `*_reviewed*.md` は除外する。

### 1.3 ファイル一覧の表示

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
検出されたqas.mdファイル:

1. qas.md（[問題数1]問）
2. qas2.md（[問題数2]問）
...

合計: [N]ファイル、[M]問
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ステップ2: 全qas.mdファイルを1つのqa.mdに統合

### 2.1 各ファイルの処理

全ての `*qas*.md` ファイルから問題と答えを抽出し、**1つのqa.mdに統合**する。

**qas.mdの構造**:
```
問題1
答え1
補足1

問題2
答え2
補足2
```

↓ 補足行と空行を削除

**qa.mdの構造**:
```
問題1
答え1
問題2
答え2
```

### 2.2 統合順序

ファイル名順（qas.md → qas2.md → qas3.md...）で統合する。

### 2.3 保存

- 統合ファイル: `[フォルダパス]/qa.md`

---

## ステップ3: 音声ファイルリストの出力

### 3.1 audiosフォルダの作成

```bash
mkdir -p [フォルダパス]/audios
```

### 3.2 トピックIDの決定

親フォルダ名をそのまま使用（例: `3nanban_trade`）

### 3.3 音声リストを出力

**全問題を通しで連番**（00から開始）:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
## 音声ファイル作成依頼

保存先: [フォルダパス]/audios/

---

### qa.md（[N]問）

| 行番号 | ファイル名 | 種類 | 読み上げテキスト |
|-------|-----------|------|-----------------|
| 1 | 00-[トピックID].wav | Q1 | [問題1] |
| 2 | 01-[トピックID].wav | A1 | [答え1] |
| 3 | 02-[トピックID].wav | Q2 | [問題2] |
| 4 | 03-[トピックID].wav | A2 | [答え2] |
...

※ 補足部分の音声は不要
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ステップ4: 完了報告

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
## 準備完了

生成したファイル:
- qa.md（[N]問）
- audios/（空フォルダ）

### 次のステップ
1. 上記リストに従って音声ファイルを作成
2. audios/ フォルダに配置
3. `/q-render [フォルダパス]` でレンダリング
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ファイル構造

```
[フォルダパス]/
├── qas.md              # 元データ1（問題・答え・補足）
├── qas2.md             # 元データ2（任意）
├── qa.md               # 音声作成用（全問題を統合）
└── audios/             # 音声ファイル保存先
    ├── 00-[トピック].wav   # Q1
    ├── 01-[トピック].wav   # A1
    ├── 02-[トピック].wav   # Q2
    ├── 03-[トピック].wav   # A2
    └── ...
```

**重要**:
- 複数のqas.mdファイルがある場合は**1つのqa.mdに統合**
- 音声ファイルは**00から通し番号**
