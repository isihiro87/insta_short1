---
description: 英単語qa.md生成と音声ファイルリスト作成
---

# 英単語音声準備

words_num.mdファイルから qa.md を生成し、英語音声を自動生成、日本語音声ファイルリストを出力します。

## 引数

- `$ARGUMENTS`: wordsフォルダパス（例: `datas/english/grade2/unit_06/quiz/words`）

---

## ステップ1: フォルダ確認

### 1.1 フォルダの存在確認

```bash
ls -la [フォルダパス]
```

### 1.2 words_num.mdファイルの検索

```bash
ls [フォルダパス]/words_*.md
```

**注意**: `words.md`（アンダースコアなし）は概要ファイルのため除外。

### 1.3 ファイル一覧の表示

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
検出されたwords_num.mdファイル:

1. words_01.md（[単語数1]語）
2. words_06.md（[単語数2]語）
...

合計: [N]ファイル、[M]語
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ステップ2: qa.mdの作成

### 2.1 words_num.mdの解析

**パターン1: 単純な単語**
```
# カテゴリ名

topic
話題、トピック

slide
スライド
```

**パターン2: 比較級・最上級**
```
# 比較級・最上級

old - older - oldest
古い（基本）

big - bigger - biggest
大きい（子音を重ねて -er / -est）
```

### 2.2 抽出ルール

1. `#`で始まる行（タイトル行）: スキップ
2. 空行: スキップ
3. 英語行:
   - `英語 - 変化形 - 変化形` の場合 → 最初の単語のみ抽出
   - 単純な単語 → そのまま使用
4. 日本語行:
   - `日本語（説明）` の場合 → 括弧を除いた日本語訳のみ抽出
   - 単純な日本語訳 → そのまま使用

### 2.3 3つのファイルを生成

**qa.md（統合版）**:
```
英単語1
日本語訳1
英単語2
日本語訳2
...
```

**qa_en.md（英単語のみ）**:
```
topic
slide
content
data
...
```

**qa_ja.md（日本語訳のみ）**:
```
話題、トピック
スライド
中身、内容
資料、データ
...
```

### 2.4 保存

- `[フォルダパス]/qa.md` - 統合版
- `[フォルダパス]/qa_en.md` - 英単語リスト（音声作成用）
- `[フォルダパス]/qa_ja.md` - 日本語訳リスト（音声作成用）

---

## ステップ3: 英語音声の自動生成

### 3.1 audiosフォルダの作成

```bash
mkdir -p [フォルダパス]/audios/en
mkdir -p [フォルダパス]/audios/ja
```

### 3.2 edge-ttsで英語音声を生成

qa_en.mdの各行に対して音声ファイルを生成。

**音声生成コマンド**:
```bash
# 各英単語に対して実行（0からの通し番号）
edge-tts --text "[英単語]" --voice "en-US-AriaNeural" --write-media "[フォルダパス]/audios/en/[番号]-words.wav"
```

### 3.3 生成実行例

```bash
# topic（1番目の単語）
edge-tts --text "topic" --voice "en-US-AriaNeural" --write-media "[フォルダパス]/audios/en/00-words.wav"

# slide（2番目の単語）
edge-tts --text "slide" --voice "en-US-AriaNeural" --write-media "[フォルダパス]/audios/en/01-words.wav"

# content（3番目の単語）
edge-tts --text "content" --voice "en-US-AriaNeural" --write-media "[フォルダパス]/audios/en/02-words.wav"
```

### 3.4 生成完了の確認

```bash
ls -la [フォルダパス]/audios/en/*.wav
```

---

## ステップ4: 日本語音声ファイルリストの出力

**日本語音声のみユーザーが作成する必要あり**:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
## 日本語音声ファイル作成依頼

音声作成用ファイル: [フォルダパス]/qa_ja.md
保存先: [フォルダパス]/audios/ja/

※ 英語音声は audios/en/ に自動生成済み

| ファイル名 | 読み上げテキスト |
|-----------|-----------------|
| 00-words.wav | 話題、トピック |
| 01-words.wav | スライド |
| 02-words.wav | 中身、内容 |
| 03-words.wav | 資料、データ |
...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ステップ5: 完了報告

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
## 準備完了

生成したファイル:
- qa.md（統合版）
- qa_en.md（英単語リスト・音声作成用）
- qa_ja.md（日本語訳リスト・音声作成用）
- audios/en/00-words.wav, 01-words.wav, ...（英語音声・自動生成）

### 次のステップ
1. qa_ja.md を使って日本語音声ファイルを作成
2. audios/ja/ フォルダに配置（00-words.wav, 01-words.wav, ...）
3. `/e-render [フォルダパス]` でレンダリング
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ファイル構造

```
[フォルダパス]/
├── words.md              # 概要（オプション）
├── words_01.md           # 単語リスト
├── words_06.md           # ...
├── qa.md                 # 生成: 統合版
├── qa_en.md              # 生成: 英単語リスト（音声作成用）
├── qa_ja.md              # 生成: 日本語訳リスト（音声作成用）
└── audios/
    ├── en/               # 英語音声（自動生成）
    │   ├── 00-words.wav  # 英単語1
    │   ├── 01-words.wav  # 英単語2
    │   └── ...
    └── ja/               # 日本語音声（ユーザー作成）
        ├── 00-words.wav  # 日本語訳1
        ├── 01-words.wav  # 日本語訳2
        └── ...
```

---

## 音声ファイルの役割

| フォルダ | 種類 | 番号 | 作成者 | 元ファイル |
|---------|------|------|--------|-----------|
| audios/en/ | 英単語 | 00, 01, 02... | 自動生成（edge-tts） | qa_en.md |
| audios/ja/ | 日本語訳 | 00, 01, 02... | ユーザー（VOICEPEAK等） | qa_ja.md |

※ 英語と日本語は同じ番号が対応（00-words.wav同士がペア）
